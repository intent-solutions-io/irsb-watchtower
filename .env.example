# =============================================================================
# IRSB Watchtower Configuration
# =============================================================================
# Copy this file to .env and fill in the values

# -----------------------------------------------------------------------------
# Chain Configuration
# -----------------------------------------------------------------------------
# RPC endpoint for the target chain (Sepolia for testnet)
RPC_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY

# Chain ID (11155111 for Sepolia)
CHAIN_ID=11155111

# -----------------------------------------------------------------------------
# IRSB Contract Addresses (Sepolia Testnet)
# -----------------------------------------------------------------------------
SOLVER_REGISTRY_ADDRESS=0xB6ab964832808E49635fF82D1996D6a888ecB745
INTENT_RECEIPT_HUB_ADDRESS=0xD66A1e880AA3939CA066a9EA1dD37ad3d01D977c
DISPUTE_MODULE_ADDRESS=0x144DfEcB57B08471e2A75E78fc0d2A74A89DB79D

# -----------------------------------------------------------------------------
# Signer Configuration
# -----------------------------------------------------------------------------
# Signer type: local | gcp-kms | lit-pkp
SIGNER_TYPE=local

# For local signer only (NEVER commit real keys)
PRIVATE_KEY=0x...

# For GCP KMS signer (stub - not yet implemented)
# GCP_PROJECT_ID=your-project
# GCP_KMS_LOCATION=us-central1
# GCP_KMS_KEYRING=watchtower
# GCP_KMS_KEY=dispute-signer

# For Lit PKP signer (stub - not yet implemented)
# LIT_PKP_PUBLIC_KEY=0x...
# LIT_AUTH_SIG=...

# -----------------------------------------------------------------------------
# API Server Configuration
# -----------------------------------------------------------------------------
API_PORT=3000
API_HOST=0.0.0.0

# Enable/disable action endpoints (dispute, evidence)
# Set to false in production until ready for mainnet
ENABLE_ACTIONS=false

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------
# Scan interval in milliseconds (default: 60 seconds)
SCAN_INTERVAL_MS=60000

# Number of blocks to look back for events
LOOKBACK_BLOCKS=1000

# Whether worker should POST findings to API
WORKER_POST_TO_API=false
API_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# Rule Configuration (Receipt Stale Detection)
# -----------------------------------------------------------------------------
# Challenge window in seconds (must match contract; default: 1 hour)
CHALLENGE_WINDOW_SECONDS=3600

# Minimum receipt age before considering it stale (default: equals challenge window)
MIN_RECEIPT_AGE_SECONDS=3600

# Maximum actions per scan cycle (rate limiting; default: 3)
MAX_ACTIONS_PER_SCAN=3

# Dry run mode: true = log findings but take no action (STRONGLY RECOMMENDED for initial deployment)
DRY_RUN=true

# Allowlist solver IDs (comma-separated; empty = all allowed)
ACTION_ALLOWLIST_SOLVER_IDS=

# Allowlist receipt IDs (comma-separated; empty = all allowed)
ACTION_ALLOWLIST_RECEIPT_IDS=

# Directory for state files (action ledger, block cursor)
STATE_DIR=.state

# Block confirmations before processing (reorg safety; default: 6)
BLOCK_CONFIRMATIONS=6

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Log level: trace | debug | info | warn | error | fatal
LOG_LEVEL=info

# Log format: json | pretty
LOG_FORMAT=pretty

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
NODE_ENV=development
